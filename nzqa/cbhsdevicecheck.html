<html>
<script>
// JavaScript NZQA Digital Exam Settings
var chrome_min = 85;
var safari_min = 11;

var resolution_width_min = 1366;
var resolution_height_min = 768;

var windows_os = 8.1;
var windows_10_os = 10;
var mac_os = 10.14;

var browser_pass = false;
var resolution_pass = false;
var os_pass = false;
var os_windows = false;

if(screen.width >= resolution_width_min && screen.height >= resolution_height_min) {
    resolution_pass = true;
}

var os_name="Unknown OS";
function operatingSystem() { 
    var OSName = "Unknown OS"
    if (navigator.userAgent.indexOf("Windows NT 10.0")!= -1) OSName="Windows 10";
    if (navigator.userAgent.indexOf("Windows NT 6.2") != -1) OSName="Windows 8";
    if (navigator.userAgent.indexOf("Windows NT 6.1") != -1) OSName="Windows 7";

    if (navigator.userAgent.indexOf("Mac") != -1) OSName="Mac/iOS";
    if (navigator.userAgent.indexOf("X11") != -1) OSName="UNIX";
    if (navigator.userAgent.indexOf("Linux") != -1) OSName="Linux";
    return OSName;
}
os_name = operatingSystem();
if(os_name == "Windows 10" || os_name == "Windows 8" || os_name == "Mac/iOS") {
    os_pass = true;
    if(os_name == "Windows 10" || os_name == "Windows 8") {
        os_windows = true;
    }
}

var browserName  = navigator.appName;
  var fullVersion  = ''+parseFloat(navigator.appVersion);
  var majorVersion = parseInt(navigator.appVersion,10);
  var nameOffset,verOffset,ix;

if ((verOffset=navigator.userAgent.indexOf("Chrome"))!=-1) {
   browserName = "Chrome";
   fullVersion = navigator.userAgent.substring(verOffset+7);
  }
  // In Safari, the true version is after "Safari" or after "Version"
  else if ((verOffset=navigator.userAgent.indexOf("Safari"))!=-1) {
   browserName = "Safari";
   fullVersion = navigator.userAgent.substring(verOffset+7);
   if ((verOffset=navigator.userAgent.indexOf("Version"))!=-1)
     fullVersion = navigator.userAgent.substring(verOffset+8);
  }

  // trim the fullVersion string at semicolon/space if present
  if ((ix=fullVersion.indexOf(";"))!=-1)
     fullVersion=fullVersion.substring(0,ix);
  if ((ix=fullVersion.indexOf(" "))!=-1)
     fullVersion=fullVersion.substring(0,ix);
  
  majorVersion = parseInt(''+fullVersion,10);
  if (isNaN(majorVersion)) {
   fullVersion  = ''+parseFloat(navigator.appVersion);
   majorVersion = parseInt(navigator.appVersion,10);
  }

  if((browserName == "Chrome" && majorVersion >= chrome_min) || browserName == "Safari" && majorVersion >= safari_min) {
      browser_pass = true;
  }

</script>
<style>

.fail {
    background-color: red;
}
.pass {
    background-color: lime;
}
.warning {
    background-color: yellow;
}

.response {
    text-align: center;
}

.response p {
    font-size: xx-large;
}

body {
    text-align: center;
}

.info {
    background-color: white;
}

</style>




<script>
    if(resolution_pass && os_pass && browser_pass) {
        document.write('<body class="pass">')
    } else {
        document.write('<body class="warning">')
    }

</script>

<section class="info">
    If any of the following sections are <b class="fail">red</b> your device does not meet the requirements.
    <br>
    If any of the following sections are <b class="warning">yellow</b> your device might need closer inspection.
    <br>
    If all of the sections are <b class="pass">green</b>, your device is suitable for NZQA Digital Exams.
</section>

<br>

<script>
    if(resolution_pass) {   
        document.write('<section id="resolution" class="pass">Screen Resolution: ' + screen.width + ' x ' + screen.height + '</section>');
    } else {
        if(os_windows) {
            document.write('<section id="resolution" class="fail">Screen Resolution: ' + screen.width + ' x ' + screen.height + '</section>');
        } else {
            document.write('<section id="resolution" class="fail">Screen Resolution: ' + screen.width + ' x ' + screen.height + '</section>');
        }
    }
</script>

<!--  Operating System-->
<script>
    if(os_pass) {   
        document.write('<section id="os" class="pass">Operating System: ' + os_name + '</section>');
    } else {
        document.write('<section id="os" class="fail">Operating System: ' + os_name + '</section>');
    }
</script>

<!--  Operating System-->
<script>
    if(browser_pass) {   
        document.write('<section id="browser" class="pass">Browser: ' + browserName + ' ' + majorVersion + '</section>');
    } else {
        document.write('<section id="browser" class="fail">Browser: ' + browserName + ' ' + majorVersion + '</section>');
    }
</script>

<section class="response">
<script>
    if(resolution_pass && os_pass && browser_pass) {        
        
        if(os_name == "Mac/iOS") {
            document.write('<p>Device Should be ok</p>');
            document.write('<br><p class="warning">Please check your macOS version is greater than 10.14</p>');
            document.write('<a href="https://support.apple.com/en-gb/HT201260#:~:text=From%20the%20Apple%20menu%20%EF%A3%BF,version%20number%20to%20see%20it.">Click here to check your masOS version</a>');
        } else {
            document.write('<p>Device Suitable</p>')
        }
    } else {
        document.write('<p>Device Fail</p><br>Please see the IT Technicians<br>');
        document.write('This might be due to Windows having font scaling set.<br>');
        document.write('<a href="https://support.microsoft.com/en-us/windows/change-the-size-of-text-in-windows-10-1d5830c3-eee3-8eaa-836b-abcc37d99b9a#:~:text=To%20change%20your%20display%20in,menu%20under%20Make%20everything%20bigger.">Click here to see how you scale your fonts</a>')
    }

</script>


</section>

</body>
</html>